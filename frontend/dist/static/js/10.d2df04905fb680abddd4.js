webpackJsonp([10],{L7hp:function(e,t){},Souu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),l=a.n(r),o=a("P9l9"),n=a("7t+N"),i=a.n(n),s={data:function(){return{request:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],Http:[{value:"HTTP",label:"HTTP"},{value:"HTTPS",label:"HTTPS"}],ParameterTyep:!0,radio:"form-data",header:[{value:"Accept",label:"Accept"},{value:"Accept-Charset",label:"Accept-Charset"},{value:"Accept-Encoding",label:"Accept-Encoding"},{value:"Accept-Language",label:"Accept-Language"},{value:"Accept-Ranges",label:"Accept-Ranges"},{value:"Authorization",label:"Authorization"},{value:"Cache-Control",label:"Cache-Control"},{value:"Connection",label:"Connection"},{value:"Cookie",label:"Cookie"},{value:"Content-Length",label:"Content-Length"},{value:"Content-Type",label:"Content-Type"},{value:"Content-MD5",label:"Content-MD5"},{value:"Date",label:"Date"},{value:"Expect",label:"Expect"},{value:"From",label:"From"},{value:"Host",label:"Host"},{value:"If-Match",label:"If-Match"},{value:"If-Modified-Since",label:"If-Modified-Since"},{value:"If-None-Match",label:"If-None-Match"},{value:"If-Range",label:"If-Range"},{value:"If-Unmodified-Since",label:"If-Unmodified-Since"},{value:"Max-Forwards",label:"Max-Forwards"},{value:"Origin",label:"Origin"},{value:"Pragma",label:"Pragma"},{value:"Proxy-Authorization",label:"Proxy-Authorization"},{value:"Range",label:"Range"},{value:"Referer",label:"Referer"},{value:"TE",label:"TE"},{value:"Upgrade",label:"Upgrade"},{value:"User-Agent",label:"User-Agent"},{value:"Via",label:"Via"},{value:"Warning",label:"Warning"}],header4:"",httpCode:[{value:"200",label:"200"},{value:"404",label:"404"},{value:"400",label:"400"},{value:"500",label:"500"},{value:"502",label:"502"},{value:"302",label:"302"}],radioType:"",result:!0,activeNames:["1","2","3"],id:"",searchApiVisible:!1,ApiList:[],ApiResponse:[],apiResponseLoading:!1,saveCorrelation:!1,showCheck:!1,sels:[],interrelateObjects:"",request3:!0,form:{name:"",request4:"POST",Http4:"HTTP",addr:"",head:[{name:"",value:"",interrelate:0},{name:"",value:"",interrelate:0}],parameterRaw:"",parameter:[{name:"",value:"",interrelate:0},{name:"",value:"",interrelate:0}],parameterType:"",check:"no_check",RegularParam:"",checkHttp:"",checkData:""},FormRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],addr:[{required:!0,message:"请输入地址",trigger:"blur"}]}}},methods:{checkRequest:function(){var e=this.form.request4;this.request3="GET"!==e&&"DELETE"!==e},handleCurrentChange:function(e){this.currentRow=e},selsChange:function(e){this.sels=e},handleCorrelation:function(e,t){var a=this;i.a.ajax({type:"get",url:o.z+"/api/automation/get_correlation_response",async:!0,data:{project_id:this.$route.params.project_id,case_id:this.$route.params.case_id},headers:{Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(e){"999999"===e.code?e.data.length?(a.ApiList=[],e.data.forEach(function(e){a.ApiList.push(e)}),a.searchApiVisible=!0,a.interrelateObjects=t):a.$message.warning({message:"无前置接口",center:!0}):a.$message.error({message:e.msg,center:!0})}})},handleResponse:function(e){var t=this;this.ApiResponse=[],this.ApiList[e].response.forEach(function(e){t.ApiResponse.push(e)})},addInterrelateSubmit:function(){this.saveCorrelation=!0;try{this.interrelateObjects.value=this.currentRow.tier}catch(e){this.$message.warning({message:"未选中接口参数",center:!0})}this.interrelateObjects.interrelate=!0,this.saveCorrelation=!1,this.searchApiVisible=!1},addApi:function(){var e=this;this.$refs.form.validate(function(t){if(t){var a=e,r=!1;e.$confirm("确认提交吗？","提示",{}).then(function(){a.form.parameterType=a.radio;var e=a.form.parameterType,t={};"form-data"===e?(!0===a.radioType&&(r=!0),t=a.form.parameter):t=a.form.parameterRaw;var n=l()({project_id:Number(a.$route.params.project_id),automationTestCase_id:Number(a.$route.params.case_id),name:a.form.name,httpType:a.form.Http4,requestType:a.form.request4,apiAddress:a.form.addr,headDict:a.form.head,requestParameterType:e,formatRaw:r,requestList:t,examineType:a.form.check,RegularParam:a.form.RegularParam,httpCode:a.form.checkHttp,responseData:a.form.checkData.toString()});i.a.ajax({type:"post",url:o.z+"/api/automation/add_new_api",async:!0,data:n,headers:{Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(e){"999999"===e.code?(a.$router.push({name:"用例接口列表",params:{project_id:a.$route.params.project_id,case_id:a.$route.params.case_id}}),a.$message({message:"保存成功",center:!0,type:"success"})):a.$message.error({message:e.msg,center:!0})}})})}})},addHead:function(){this.form.head.push({name:"",value:"",interrelate:0})},delHead:function(e){this.form.head.splice(e,1),0===this.form.head.length&&this.form.head.push({name:"",value:"",interrelate:0})},addParameter:function(){this.form.parameter.push({name:"",value:"",interrelate:0})},delParameter:function(e){this.form.parameter.splice(e,1),0===this.form.parameter.length&&this.form.parameter.push({name:"",value:"",interrelate:0})},changeParameterType:function(){"form-data"===this.radio?this.ParameterTyep=!0:this.ParameterTyep=!1},handleChange:function(e){}},watch:{radio:function(){this.changeParameterType()},form:{handler:function(e,t){"no_check"===e.check?this.showCheck=!1:this.showCheck=!0},deep:!0}},mounted:function(){}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:{name:"用例接口列表",params:{project_id:this.$route.params.project_id,case_id:this.$route.params.case_id}}}},[a("el-button",{staticClass:"return-list"},[a("i",{staticClass:"el-icon-d-arrow-left",staticStyle:{"margin-right":"5px"}}),e._v("返回列表")])],1),e._v(" "),a("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:{name:"用例接口列表",params:{project_id:this.$route.params.project_id,case_id:this.$route.params.case_id}}}},[a("el-button",{staticClass:"return-list",staticStyle:{float:"right"}},[e._v("取消")])],1),e._v(" "),a("el-button",{staticClass:"return-list",staticStyle:{float:"right","margin-right":"15px"},attrs:{type:"primary"},nativeOn:{click:function(t){return e.addApi(t)}}},[e._v("保存")]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.FormRules}},[a("div",{staticStyle:{border:"1px solid #e6e6e6","margin-bottom":"10px",padding:"15px"}},[a("el-form-item",{attrs:{label:"接口名称:","label-width":"83px",prop:"name"}},[a("el-input",{attrs:{placeholder:"名称","auto-complete":""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"==typeof t?t.trim():t)},expression:"form.name"}})],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"URL:","label-width":"83px"}},[a("el-select",{attrs:{placeholder:"请求方式"},on:{change:e.checkRequest},model:{value:e.form.request4,callback:function(t){e.$set(e.form,"request4",t)},expression:"form.request4"}},e._l(e.request,function(e,t){return a("el-option",{key:t+"",attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"HTTP协议"},model:{value:e.form.Http4,callback:function(t){e.$set(e.form,"Http4",t)},expression:"form.Http4"}},e._l(e.Http,function(e,t){return a("el-option",{key:t+"",attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{prop:"addr"}},[a("el-input",{attrs:{placeholder:"地址","auto-complete":""},model:{value:e.form.addr,callback:function(t){e.$set(e.form,"addr","string"==typeof t?t.trim():t)},expression:"form.addr"}})],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"请求头部",name:"1"}},[a("el-table",{attrs:{data:e.form.head,"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"name",label:"标签","min-width":"28%",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"head标签",filterable:""},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}},e._l(e.header,function(e,t){return a("el-option",{key:t+"",attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticClass:"selectInput",attrs:{value:t.row.name,placeholder:"请输入内容"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name","string"==typeof a?a.trim():a)},expression:"scope.row.name"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"value",label:"内容","min-width":"40%",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{value:t.row.value,placeholder:"请输入内容"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value","string"==typeof a?a.trim():a)},expression:"scope.row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"interrelate",label:"是否关联","min-width":"13%",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{model:{value:t.row.interrelate,callback:function(a){e.$set(t.row,"interrelate",a)},expression:"scope.row.interrelate"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"7%"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.interrelate?a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleCorrelation(t.$index,t.row)}}},[e._v("关联")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"7%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px",cursor:"pointer"},on:{click:function(a){return e.delHead(t.$index)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index===e.form.head.length-1?a("el-button",{staticClass:"el-icon-plus",attrs:{size:"mini"},on:{click:e.addHead}}):e._e()]}}])})],1)],1),e._v(" "),a("el-collapse-item",{attrs:{title:"请求参数",name:"2"}},[a("div",{staticStyle:{margin:"5px"}},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:4}},[a("el-radio",{attrs:{label:"form-data"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("表单(form-data)")])],1),e._v(" "),e.request3?a("el-col",{attrs:{span:4}},[a("el-radio",{attrs:{label:"raw"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("源数据(raw)")])],1):e._e(),e._v(" "),e.request3?a("el-col",{attrs:{span:16}},[a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.ParameterTyep,expression:"ParameterTyep"}],attrs:{label:"3"},model:{value:e.radioType,callback:function(t){e.radioType=t},expression:"radioType"}},[e._v("表单转源数据")])],1):e._e()],1)],1),e._v(" "),a("el-table",{class:e.ParameterTyep?"parameter-a":"parameter-b",attrs:{data:e.form.parameter,"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"name",label:"参数名","min-width":"28%",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{value:t.row.name,placeholder:"请输入参数值"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name","string"==typeof a?a.trim():a)},expression:"scope.row.name"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"value",label:"参数值","min-width":"40%",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{value:t.row.value,placeholder:"请输入参数值"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value","string"==typeof a?a.trim():a)},expression:"scope.row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"interrelate",label:"是否关联","min-width":"13%",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{model:{value:t.row.interrelate,callback:function(a){e.$set(t.row,"interrelate",a)},expression:"scope.row.interrelate"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"7%"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.interrelate?a("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleCorrelation(t.$index,t.row)}}},[e._v("关联")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"7%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px",cursor:"pointer"},on:{click:function(a){return e.delParameter(t.$index)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index===e.form.parameter.length-1?a("el-button",{staticClass:"el-icon-plus",attrs:{size:"mini"},on:{click:e.addParameter}}):e._e()]}}])})],1),e._v(" "),[a("el-input",{class:e.ParameterTyep?"parameter-b":"parameter-a",attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.form.parameterRaw,callback:function(t){e.$set(e.form,"parameterRaw","string"==typeof t?t.trim():t)},expression:"form.parameterRaw"}})]],2),e._v(" "),a("el-dialog",{attrs:{title:"关联",visible:e.searchApiVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.searchApiVisible=t}}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{height:"400px","line-height":"100px",overflow:"auto","overflow-x":"hidden",border:"1px solid #e6e6e6"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","active-text-color":"rgb(32, 160, 255)","unique-opened":!0}},e._l(e.ApiList,function(t,r){return a("el-menu-item",{key:t.id,attrs:{index:r+""},nativeOn:{click:function(t){return e.handleResponse(r)}}},[e._v(e._s(t.name))])}),1)],1)]),e._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticStyle:{height:"400px","line-height":"100px",overflow:"auto","overflow-x":"hidden"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.apiResponseLoading,expression:"apiResponseLoading"}],staticStyle:{width:"100%"},attrs:{data:e.ApiResponse,"highlight-current-row":"","show-header":!1,height:"400","max-height":"400"},on:{"current-change":e.handleCurrentChange,"selection-change":e.selsChange}},[a("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"100%",sortable:""}})],1)],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.searchApiVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.saveCorrelation},nativeOn:{click:function(t){return e.addInterrelateSubmit(t)}}},[e._v("保存")])],1)],1),e._v(" "),a("el-collapse-item",{attrs:{title:"测试结果校验",name:"3"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-radio-group",{model:{value:e.form.check,callback:function(t){e.$set(e.form,"check",t)},expression:"form.check"}},[a("el-radio-button",{attrs:{label:"no_check"}},[a("div",[e._v("不校验")])]),e._v(" "),a("el-radio-button",{attrs:{label:"only_check_status"}},[a("div",[e._v("校验http状态")])]),e._v(" "),a("el-radio-button",{attrs:{label:"json"}},[a("div",[e._v("JSON校验")])]),e._v(" "),a("el-radio-button",{attrs:{label:"entirely_check"}},[a("div",[e._v("完全校验")])]),e._v(" "),a("el-radio-button",{attrs:{label:"Regular_check"}},[a("div",[e._v("正则校验")])])],1),e._v(" "),"Regular_check"===e.form.check?a("el-input",{directives:[{name:"modele",rawName:"v-modele",value:e.form.RegularParam,expression:"form.RegularParam"}],staticStyle:{width:"10%","padding-left":"5px","margin-top":"1px"},attrs:{placeholder:"请输入绑定参数名"}}):e._e()],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showCheck,expression:"showCheck"}]},[a("el-select",{attrs:{placeholder:"HTTP状态"},model:{value:e.form.checkHttp,callback:function(t){e.$set(e.form,"checkHttp",t)},expression:"form.checkHttp"}},e._l(e.httpCode,function(e,t){return a("el-option",{key:t+"",attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{"margin-top":"10px"},attrs:{type:"textarea",rows:8,placeholder:"请输入mock内容"},model:{value:e.form.checkData,callback:function(t){e.$set(e.form,"checkData","string"==typeof t?t.trim():t)},expression:"form.checkData"}})],1)])],1)],1)],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(s,c,!1,function(e){a("L7hp"),a("feXS")},"data-v-5d800cb4",null);t.default=u.exports},feXS:function(e,t){}});
//# sourceMappingURL=10.d2df04905fb680abddd4.js.map