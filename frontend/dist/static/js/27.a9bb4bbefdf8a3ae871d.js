webpackJsonp([27],{BQx9:function(t,e){},ntkW:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r("P9l9"),o={data:function(){return{project:"",groupData:[],addGroupFormVisible:!1,addGroupLoading:!1,addFormVisible:!1,addGroupFormRules:{firstgroup:[{required:!0,message:"请输入子分组名称",trigger:"blur"}]},addGroupForm:{firstgroup:""},editFirstGroupFormVisible:!1,editFirstGroupLoading:!1,editFirstFormVisible:!1,editFirstGroupFormRules:{secondFirstGroup:[{required:!0,message:"请输入分组名称",trigger:"blur"}]},editFirstGroupForm:{firstgroup:"",second_id:""},filters:{name:""},api:[],total:0,page:1,listLoading:!1,sels:[],apiView:!0}},methods:{init:function(){this.addGroupForm.firstgroup=""},getApiGroup:function(){var t=this,e={project_id:this.$route.params.project_id},r={"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))};Object(i.n)(r,e).then(function(e){var r=e.msg,i=e.code,o=e.data;"999999"===i?(t.groupData=o,t.init()):t.$message.error({message:r,center:!0})})},handleAddGroup:function(){this.addGroupFormVisible=!0},handleEditFirstGroup:function(t,e){this.editFirstGroupFormVisible=!0,this.editFirstGroupForm.second_id=t,this.editFirstGroupForm.secondFirstGroup=e},addGroupSubmit:function(){var t=this;this.$refs.addGroupForm.validate(function(e){if(e){var r=t;t.$confirm("确认提交吗？","提示",{}).then(function(){r.addGroupLoading=!0;var e={project_id:Number(t.$route.params.project_id),name:r.addGroupForm.firstgroup},o={"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))};Object(i.b)(o,e).then(function(t){var e=t.msg,i=t.code;t.data;r.addGroupLoading=!1,"999999"===i?(r.$message({message:"添加成功",center:!0,type:"success"}),r.$refs.addGroupForm.resetFields(),r.addGroupFormVisible=!1,r.getApiGroup(),r.init()):"999997"===i?r.$message.error({message:e,center:!0}):(r.$message.error({message:e,center:!0}),r.$refs.addGroupForm.resetFields(),r.addGroupFormVisible=!1,r.getApiGroup(),r.init())})})}})},editFirstGroupSubmit:function(){var t=this;this.$refs.editFirstGroupForm.validate(function(e){if(e){var r=t;t.$confirm("确认提交吗？","提示",{}).then(function(){r.editFirstGroupLoading=!0;var e={project_id:Number(t.$route.params.project_id),name:r.editFirstGroupForm.secondFirstGroup,id:r.editFirstGroupForm.second_id},o={"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))};Object(i.A)(o,e).then(function(t){var e=t.msg,i=t.code;t.data;r.editFirstGroupLoading=!1,"999999"===i?(r.$message({message:"修改成功",center:!0,type:"success"}),r.$refs.editFirstGroupForm.resetFields(),r.editFirstGroupFormVisible=!1,r.getApiGroup(),r.init()):"999997"===i?r.$message.error({message:e,center:!0}):(r.$message.error({message:e,center:!0}),r.$refs.editFirstGroupForm.resetFields(),r.editFirstGroupFormVisible=!1,r.getApiGroup(),r.init())})})}})},handleDelFirst:function(t){var e=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){var r=e,o={id:Number(t),project_id:Number(e.$route.params.project_id)},s={"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))};Object(i.f)(s,o).then(function(t){var e=t.msg,i=t.code;t.data;"999999"===i?r.$message({message:"删除成功",center:!0,type:"success"}):r.$message.error({message:e,center:!0}),r.getApiGroup()})})}},mounted:function(){this.getApiGroup(),this.project=this.$route.params.project_id}},s={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[r("el-row",{staticClass:"row-title",attrs:{span:24}},[r("el-col",{attrs:{span:4}},[r("el-button",{staticClass:"addGroup",on:{click:t.handleAddGroup}},[t._v("新增分组")]),t._v(" "),r("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:{name:"快速测试",params:{project_id:this.$route.params.project_id}}}},[r("el-button",{staticClass:"addGroup"},[t._v("快速测试")])],1),t._v(" "),r("div",{staticClass:"api-title"},[r("strong",[t._v("接口分组")])]),t._v(" "),r("div",{staticClass:"api-title",staticStyle:{cursor:"pointer"}},[r("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:{name:"接口列表",params:{project_id:this.$route.params.project_id}}}},[t._v("\n                    所有接口\n                ")])],1),t._v(" "),r("aside",[r("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","active-text-color":"rgb(32, 160, 255)","unique-opened":!0}},[t._l(t.groupData,function(e,i){return[r("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:{name:"分组接口列表",params:{project_id:t.project,firstGroup:e.id}}}},[r("el-menu-item",{key:e.id,staticClass:"group",attrs:{index:i+""}},[r("template",{slot:"title"},[t._v(t._s(e.name)+"\n                                    "),r("el-dropdown",{staticClass:"editGroup",staticStyle:{"margin-right":"10%"},attrs:{trigger:"hover"}},[r("i",{staticClass:"el-icon-more"}),t._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{nativeOn:{click:function(r){return t.handleDelFirst(e.id)}}},[t._v("删除")]),t._v(" "),r("el-dropdown-item",{nativeOn:{click:function(r){return t.handleEditFirstGroup(e.id,e.name)}}},[t._v("修改")])],1)],1)],1)],2)],1)]})],2)],1)],1),t._v(" "),r("el-dialog",{staticStyle:{width:"60%",left:"20%"},attrs:{title:"新增分组",visible:t.addGroupFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addGroupFormVisible=e}}},[r("el-form",{ref:"addGroupForm",attrs:{model:t.addGroupForm,"label-width":"80px",rules:t.addGroupFormRules}},[r("el-form-item",{attrs:{label:"分组名称",prop:"firstgroup"}},[r("el-input",{staticStyle:{width:"90%"},attrs:{"auto-complete":"off"},model:{value:t.addGroupForm.firstgroup,callback:function(e){t.$set(t.addGroupForm,"firstgroup","string"==typeof e?e.trim():e)},expression:"addGroupForm.firstgroup"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(e){t.addGroupFormVisible=!1}}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary",loading:t.addGroupLoading},nativeOn:{click:function(e){return t.addGroupSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),r("el-dialog",{staticStyle:{width:"60%",left:"20%"},attrs:{title:"编辑分组",visible:t.editFirstGroupFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.editFirstGroupFormVisible=e}}},[r("el-form",{ref:"editFirstGroupForm",attrs:{model:t.editFirstGroupForm,"label-width":"80px",rules:t.editFirstGroupFormRules}},[r("el-form-item",{attrs:{label:"分组名称",prop:"secondFirstGroup"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editFirstGroupForm.secondFirstGroup,callback:function(e){t.$set(t.editFirstGroupForm,"secondFirstGroup","string"==typeof e?e.trim():e)},expression:"editFirstGroupForm.secondFirstGroup"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(e){t.editFirstGroupFormVisible=!1}}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary",loading:t.editFirstGroupLoading},nativeOn:{click:function(e){return t.editFirstGroupSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),r("el-col",{attrs:{span:20}},[r("div",{staticStyle:{"margin-left":"10px","margin-right":"20px"}},[r("router-view")],1)])],1)],1)},staticRenderFns:[]};var a=r("VU/8")(o,s,!1,function(t){r("BQx9")},"data-v-0853e244",null);e.default=a.exports}});
//# sourceMappingURL=27.a9bb4bbefdf8a3ae871d.js.map