webpackJsonp([25],{Aie7:function(t,e){},M7TN:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("mvHQ"),i=r.n(o),s=r("P9l9"),a=r("7t+N"),n=r.n(a),d={data:function(){return{project:"",groupData:[],addGroupFormVisible:!1,addGroupLoading:!1,addFormVisible:!1,addGroupFormRules:{firstgroup:[{required:!1,trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]},addGroupForm:{firstgroup:""},editFirstGroupFormVisible:!1,editFirstGroupLoading:!1,editFirstFormVisible:!1,editFirstGroupFormRules:{secondFirstGroup:[{required:!0,message:"请输入分组名称",trigger:"blur"}]},editFirstGroupForm:{firstgroup:"",second_id:""},filters:{name:""},api:[],total:0,page:1,listLoading:!1,sels:[],apiView:!0}},methods:{init:function(){this.addGroupForm.firstgroup=""},getCaseGroup:function(){var t=this;n.a.ajax({type:"get",url:s.z+"/api/automation/group",async:!0,data:{project_id:Number(this.$route.params.project_id)},headers:{Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(e){"999999"===e.code?(t.groupData=e.data,t.init()):t.$message.error({message:e.msg,center:!0})}})},handleAddGroup:function(){this.addGroupFormVisible=!0},handleEditFirstGroup:function(t,e){this.editFirstGroupFormVisible=!0,this.editFirstGroupForm.second_id=t,this.editFirstGroupForm.secondFirstGroup=e},addGroupSubmit:function(){var t=this;this.$refs.addGroupForm.validate(function(e){if(e){var r=t;t.$confirm("确认提交吗？","提示",{}).then(function(){r.addGroupLoading=!0,n.a.ajax({type:"post",url:s.z+"/api/automation/add_group",async:!0,data:i()({project_id:Number(t.$route.params.project_id),name:r.addGroupForm.firstgroup}),headers:{"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(t){r.addGroupLoading=!1,"999999"===t.code?(r.$message({message:"添加成功",center:!0,type:"success"}),r.$refs.addGroupForm.resetFields(),r.addGroupFormVisible=!1,r.getCaseGroup(),r.init()):"999997"===t.code?r.$message.error({message:t.msg,center:!0}):(r.$message.error({message:t.msg,center:!0}),r.$refs.addGroupForm.resetFields(),r.addGroupFormVisible=!1,r.getCaseGroup(),r.init())}})})}})},editFirstGroupSubmit:function(){var t=this;this.$refs.editFirstGroupForm.validate(function(e){if(e){var r=t;t.$confirm("确认提交吗？","提示",{}).then(function(){r.editFirstGroupLoading=!0,n.a.ajax({type:"post",url:s.z+"/api/automation/update_name_group",async:!0,data:i()({project_id:Number(t.$route.params.project_id),name:r.editFirstGroupForm.secondFirstGroup,id:r.editFirstGroupForm.second_id}),headers:{"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(t){r.editFirstGroupLoading=!1,"999999"===t.code?(r.$message({message:"修改成功",center:!0,type:"success"}),r.$refs.editFirstGroupForm.resetFields(),r.editFirstGroupFormVisible=!1,r.getCaseGroup(),r.init()):"999997"===t.code?r.$message.error({message:t.msg,center:!0}):(r.$message.error({message:t.msg,center:!0}),r.$refs.editFirstGroupForm.resetFields(),r.editFirstGroupFormVisible=!1,r.getCaseGroup(),r.init())}})})}})},handleDelFirst:function(t){var e=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){var r=e;n.a.ajax({type:"post",url:s.z+"/api/automation/del_group",async:!0,data:i()({id:Number(t),project_id:Number(e.$route.params.project_id)}),headers:{"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(t){"999999"===t.code?r.$message({message:"删除成功",center:!0,type:"success"}):r.$message.error({message:t.msg,center:!0}),r.getCaseGroup()}})}).catch(function(){})}},mounted:function(){this.getCaseGroup(),this.project=this.$route.params.project_id}},u={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[r("el-row",{staticClass:"row-title",attrs:{span:24}},[r("el-col",{attrs:{span:4}},[r("el-button",{staticClass:"addGroup",on:{click:t.handleAddGroup}},[t._v("新增分组")]),t._v(" "),r("div",{staticClass:"api-title"},[r("strong",[t._v("用例分组")])]),t._v(" "),r("div",{staticClass:"api-title",staticStyle:{cursor:"pointer"}},[r("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:{name:"用例列表",params:{project_id:this.$route.params.project_id}}}},[t._v("\n                    所有用例\n                ")])],1),t._v(" "),r("aside",[r("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","active-text-color":"rgb(32, 160, 255)","unique-opened":!0}},[t._l(t.groupData,function(e,o){return[r("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:{name:"分组用例列表",params:{project_id:t.project,firstGroup:e.id}}}},[r("el-menu-item",{key:e.id,staticClass:"group",attrs:{index:o+""}},[r("template",{slot:"title"},[t._v(t._s(e.name)+"\n                                "),r("el-dropdown",{staticClass:"editGroup",staticStyle:{"margin-right":"10%"},attrs:{trigger:"hover"}},[r("i",{staticClass:"el-icon-more"}),t._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{nativeOn:{click:function(r){return t.handleDelFirst(e.id)}}},[t._v("删除")]),t._v(" "),r("el-dropdown-item",{nativeOn:{click:function(r){return t.handleEditFirstGroup(e.id,e.name)}}},[t._v("修改")])],1)],1)],1)],2)],1)]})],2)],1)],1),t._v(" "),r("el-dialog",{staticStyle:{width:"60%",left:"20%"},attrs:{title:"新增分组",visible:t.addGroupFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addGroupFormVisible=e}}},[r("el-form",{ref:"addGroupForm",attrs:{model:t.addGroupForm,"label-width":"80px",rules:t.addGroupFormRules}},[r("el-form-item",{attrs:{label:"分组名称",prop:"firstgroup"}},[r("el-input",{staticStyle:{width:"90%"},attrs:{"auto-complete":"off"},model:{value:t.addGroupForm.firstgroup,callback:function(e){t.$set(t.addGroupForm,"firstgroup","string"==typeof e?e.trim():e)},expression:"addGroupForm.firstgroup"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(e){t.addGroupFormVisible=!1}}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary",loading:t.addGroupLoading},nativeOn:{click:function(e){return t.addGroupSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),r("el-dialog",{staticStyle:{width:"60%",left:"20%"},attrs:{title:"编辑分组",visible:t.editFirstGroupFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.editFirstGroupFormVisible=e}}},[r("el-form",{ref:"editFirstGroupForm",attrs:{model:t.editFirstGroupForm,"label-width":"80px",rules:t.editFirstGroupFormRules}},[r("el-form-item",{attrs:{label:"分组名称",prop:"secondFirstGroup"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editFirstGroupForm.secondFirstGroup,callback:function(e){t.$set(t.editFirstGroupForm,"secondFirstGroup","string"==typeof e?e.trim():e)},expression:"editFirstGroupForm.secondFirstGroup"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(e){t.editFirstGroupFormVisible=!1}}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary",loading:t.editFirstGroupLoading},nativeOn:{click:function(e){return t.editFirstGroupSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),r("el-col",{attrs:{span:20}},[r("div",{staticStyle:{"margin-left":"10px","margin-right":"20px"}},[r("router-view")],1)])],1)],1)},staticRenderFns:[]};var p=r("VU/8")(d,u,!1,function(t){r("Aie7")},"data-v-23c7c9f5",null);e.default=p.exports}});
//# sourceMappingURL=25.ba548ae037da73230aa6.js.map